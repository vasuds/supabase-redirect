<script>
  window.onload = function() {
    console.log("üîß Redirect page loaded.");

    // Log full URL
    console.log("Full URL is:", window.location.href);
    console.log("Full hash is:", window.location.hash);

    // Parse hash parameters
    const hash = window.location.hash.substr(1);
    const params = new URLSearchParams(hash);

    // Log all parsed parameters
    for (const [key, value] of params.entries()) {
      console.log(`Param key: ${key}, value: ${value}`);
    }

    // Get access_token and type
    const accessToken = params.get('access_token');
    const type = params.get('type');

    console.log("Access token is:", accessToken);
    console.log("Type is:", type);

    if (accessToken) {
      // Encode token safely in URL
      const newUrl = `https://da35cdda6971.ngrok-free.app/?token=${encodeURIComponent(accessToken)}&type=${encodeURIComponent(type)}`;
      console.log("Redirecting to:", newUrl);
      window.location.replace(newUrl);
    } else {
      console.log("‚ùå No access token found in hash.");
      document.body.innerHTML = "‚ùå No access token found.";
    }
  }
</script>




