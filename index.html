<script>
  window.onload = function() {
    console.log("üîß Redirect page loaded.");

    // Log the full current URL
    console.log("Full URL is:", window.location.href);
    console.log("Full search is:", window.location.search);
    console.log("Full hash is:", window.location.hash);

    // Try parsing from hash
    const hash = window.location.hash.substr(1);
    console.log("Parsed hash without #: ", hash);

    const params = new URLSearchParams(hash);

    // Log all keys in params
    for (const [key, value] of params.entries()) {
      console.log(`Param key: ${key}, value: ${value}`);
    }

    const accessToken = params.get('access_token');
    const type = params.get('type');

    console.log("Access token is:", accessToken);
    console.log("Type is:", type);

    if (accessToken) {
      const newUrl = `https://da35cdda6971.ngrok-free.app/?token=${accessToken}&type=${type}`;
      console.log("Redirecting to:", newUrl);
      window.location.replace(newUrl);
    } else {
      console.log("‚ùå No access token found in hash.");
      document.body.innerHTML = "‚ùå No access token found.";
    }
  }
</script>



